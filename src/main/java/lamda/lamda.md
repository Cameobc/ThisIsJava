#람다식(Lambda Expression)

------------
1. 람다식이란?
    - 병렬 처리와 이벤트 지향 프로그래밍에 적합하기 때문에 함수적 프로그래밍이 부각되고 있으며, 람다식은 익명 함수를 생성하기 위한 식으로 객체 지향 언어보다는 함수지향 언어에 가깝다.
    - 람다식은 매개변수를 가진 코드 블록이지만, 런타임시에는 익명 구현 객체를 생성한다.
    - (매개변수) -> {실행코드} 형태를 띠고 있지만, 런타임 시에서는 인터페이스의 익명 구현 객체로 생성된다.
    
---
2. 기본 문법
    - (타입 매개변수) -> {실행문}
    - 매개 변수 타입은 런타임 시에 대입되는 값에 따라 자동으로 인식될 수 있기 때문에, 람다식에ㅐ서는 매개 변수의 타입을 일반적으로 언급하지 않는다.
    - 하나의 매개 변수만 있다면 괄호 ()를 생략할 수 있고, 하나의 실행문만 있다면 중괄호 {} 도 생략 가능
    - 만약 매개 변수가 없다면 반드시 빈 괄호를 사용해야 함.
    - 중괄호에 리턴문만 있을 경우 (x, y) -> x+y 와 같은 형태로 작성하는 것이 정석이다.
    
---
3. 타겟 타입과 함수적 인터페이스(@FunctionalInterface)
    - 람다식은 단순히 메소드를 선언하는 것이 아니라 이 메소드가 가지고 있는 객체를 생성한다.
    - 람다식은 인터페이스 변수에 대입되기 때문에 인터페이스의 익명 구현 객체를 생성한다.
    - 인터페이스는 직접 객체화할 수 없기 때문에 구현 클래스가 필요한데 람다식은 익명 구현 클래스를 생성하고 객체회한다.
    - 람다식이 대입될 인터페이스를 람다식의 타겟 타입(targetType) 이라고 한다.
    - 람다식은 하나의 메소드를 정의하기 때문에 두 개 이상의 추상 메소드가 선언된 인터페이스는 람다식을 통해 객체를 생성할 수 없다.
    - 하나의 추상 메서드가 선언된 인터페이스를 함수적 인터페이스(functional interface) 라고 하며, 인터페이스 선언 시 @FuntionalInterface 어노테이션을 붙이면 컴파일러가 체킹해준다.

---
4. 클래스의 멤버 사용
   - 람다식 실행 블록에서는 클래스의 멤버인 필드와 메소드를 제약 없이 사용할 수 있지만, this 키워드를 사용할 때엔 주의가 필요하다.
   - 익명 객체 내부에서 this 는 익명 객체의 참조이지만, 람다식에서 this 는 내부적으로 생성되는 익명 객체의 참조가 아니라 람다식을 실행한 객체의 참조이다.

---
5. 로컬 변수 사용
   - 람다식은 메소드 내부에서 주로 작성되기 때문에 로컬 익명 구현 객체를 생성시킨다고 봐야 함
   - 람다식에서 바깥 클래스의 필드나 메소드는 제한 없이 사용할 수 있으나, 메소드의 매개 변수 또는 로컬 변수를 사용하면 이 두 변수는 final 특성을 가져야 한다.
   > 9.5.3 익명 객체의 로컬 변수 사용 참고
   - 매개 변수 또는 로컬 변수를 람다식에서 읽는 것은 허용되지만 람다식 내부 또는 외부에서 변경할 수 없다.

---
6. 함수적 인터페이스
   - 자바에서 제공하는 표준 API에서 한 개의 추상 메소드를 가지는 인터페이스들은 모두 람다식을 이용해서 익명 구현 객체로 표현이 가능함
   - 함수적 인터페이스의 목적은 메소드 또는 생성자의 매개 타입으로 사용되어 람다식을 대입할 수 있도록 하기 위해서임

| 종류        | 추상메소드특징                                                |
|-----------|--------------------------------------------------------|
| Consumer  | - 매개값은 있고, 리턴값 없음                                      |
| Supplier  | - 매개값 없고, 리턴값 있음                                       |
| Function  | - 매개값, 리턴값 있음. <br/> - 주로 매개값을 리턴값으로 매핑(타입변환)          |
| Operator  | - 매개값 있고, 리턴값 있음 <br/> - 주로 매개값을 연산하고 결과를 리턴           |
| Predicate | - 매개값 있고, 리턴타입 boolean <br/> - 매개값을 조사해서 true/false 리턴 |

   - Consumer
     - 리턴값이 없는 accept() 메소드를 지님. 
   - 디폴트나 정적 메소드는 추상 메소드가 아니기 때문에 함수적 인터페이스에 선언하더라도 여전히 함수적 인터페이스의 성질을 잃지 않는다.
   - 함수적 인터페이스 성질이란 하나의 추상 메소드를 가지고 있고, 람다식으로 익명 구현 객체를 생성할 수 있는 것을 말한다.
   - 인터페이스A.andThen(인터페이스B) : A 처리 후 결과를 B의 매개값으로 제공 
   - 인터페이스A.compose(인터페이스B) : B 처리 후 결과를 A의 매개값으로 제공 

---
7. 메소드 참조(Method References)
   - 메소드를 참조해서 매개 변수의 정보 및 리턴 타입을 알아내여, 람다식에서 불필요한 매개 변수를 제거하는 것이 목적
     - (left, right) -> Math.max(left, right);
     - -> Math :: max;
   - 메소드 참조도 람다식과 마찬가지로 인터페이스의 익명 구현 객체로 생성되므로 타겟 타입인 인터페이스의 추상 메소드가 어떤 매개 변수를 가지고, 리턴 타입이 무엇인가에 따라 달라진다.
     - 정적 메소드와 인스턴스 메소드 참조
       - 정적 메소드를 참조한 경우 클래스 이름 뒤에 :: 기호를 붙이고 정적 메소드를 기술
       - 인스턴스 메소드일 경우 먼저 객체를 생성한 다음에 참조 변수 뒤에 :: 기호를 붙이고 인스턴스 메소드 이름을 기술함
     - 매개 변수의 메소드 참조
       - 람다식에 제공되는 a 매개 변수의 메소드를 호출해서 b 매개 변수의 매개값으로 사용하는 경우
       - a 클래스명 :: 메소드명
     - 생성자 참조
       - 생성자를 참조한다는 것은 객체 생성을 의미함
       - 람다식은 단순히 객체 생성 수 리턴만 하며, 해당 생성자가 존재하지 않으면 컴파일 오류를 발생
       - 클래스 :: new